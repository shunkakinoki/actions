name: Auto Approve
description: Auto-approve pull requests based on configurable conditions
author: shunkakinoki
branding:
  icon: check-circle
  color: green
inputs:
  github-token:
    description: GitHub token for API access
    required: true
  allowed-actors:
    description: Comma-separated list of allowed actors (e.g., 'dependabot[bot],renovate[bot]')
    required: false
    default: 'dependabot[bot]'
  required-labels:
    description: Comma-separated list of required labels
    required: false
    default: 'automerge'
  title-pattern:
    description: Pattern to match in PR title
    required: false
    default: ''
runs:
  using: composite
  steps:
    - name: Auto Approve PR
      if: |
        github.event_name == 'pull_request_target' &&
        contains(fromJSON(format('[{0}]', inputs.allowed-actors)), github.actor) &&
        (inputs.required-labels == '' || contains(inputs.required-labels, github.event.pull_request.labels.*.name)) &&
        (inputs.title-pattern == '' || contains(github.event.pull_request.title, inputs.title-pattern))
      uses: hmarr/auto-approve-action@v4
      with:
        github-token: ${{ inputs.github-token }}
